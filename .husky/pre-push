#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run Storybook visual tests before push
echo "ðŸŽ¨ Running Storybook visual tests..."
cd packages/component-library

# Check if Storybook is already running on port 6006
if ! lsof -ti:6006 > /dev/null 2>&1; then
  echo "Starting Storybook for visual tests..."
  npm run test:storybook:ci
else
  echo "Storybook is already running, running tests against existing instance..."
  npm run test:storybook
fi

# Run e2e tests for app
echo "ðŸ§ª Running app e2e tests..."
cd ../app
npm run test:e2e
