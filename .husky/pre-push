# Run Storybook visual tests before push
echo "ðŸŽ¨ Running Storybook visual tests..."
cd packages/component-library

# Check if Storybook is already running on port 6006
if ! lsof -ti:6006 > /dev/null 2>&1; then
  echo "Starting Storybook for visual tests..."
  npm run test:storybook:ci
else
  echo "Storybook is already running, running tests against existing instance..."
  npm run test:storybook
fi

# E2E tests are run by CI - skipping in pre-push to avoid flaky failures
# The CI pipeline runs E2E tests in a more stable environment
echo "âœ… E2E tests will be run by CI"
